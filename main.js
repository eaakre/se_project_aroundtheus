!function(){"use strict";class t{constructor(t,e,s){let{name:i,link:r}=t;this._name=i,this._link=r,this._cardSelector=e,this._handleImageClick=s}_getCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".cards__list-item").cloneNode(!0)}_setEventsListeners(){this._cardImage.addEventListener("click",(()=>{this._handleImageClick({title:this._name,url:this._link})})),this._likeButton.addEventListener("click",this._handleLikeIcon),this._deleteButton.addEventListener("click",this._handleDeleteCard)}_handleDeleteCard=()=>{this._cardElement.remove(),this._cardElement=null};_handleLikeIcon=()=>{this._likeButton.classList.toggle("cards__favorite_active")};getView(){return this._cardElement=this._getCardElement(),this._cardTitle=this._cardElement.querySelector(".cards__title"),this._cardImage=this._cardElement.querySelector(".cards__image"),this._likeButton=this._cardElement.querySelector(".cards__favorite"),this._deleteButton=this._cardElement.querySelector(".cards__delete-button"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventsListeners(),this._cardElement}}class e{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(t=>{(t.target.classList.contains("modal_opened")||t.target.classList.contains("modal__close"))&&this.close()}))}}class s extends e{constructor(t,e){super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupElement.querySelectorAll(".form__input"),this._handleFormSubmit=e}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){super.close(),this._popupForm.reset()}}class i{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_showInputError(t,e){const s=this._form.querySelector(`.${t.id}-error`);t.classList.add(this._inputErrorClass),s.textContent=e,s.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`.${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_toggleButtonState(){if(this._hasInvalidInput(this._inputList))return this.disableButton();this._enableButton()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputList.every((t=>t.validity.valid))}_checkValidity(t){if(!t.validity.valid)return this._showInputError(t,t.validationMessage);this._hideInputError(t)}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}const r={formSelector:".modal__form",inputSelector:".form__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},o=document.querySelector("#profile-edit-modal"),n=document.forms["edit-form"],a=document.forms["add-form"],l=document.querySelector(".profile__edit-button"),c=o.querySelector(".form__input_name"),d=o.querySelector(".form__input_description"),u=document.querySelector(".profile__add-button"),_=e=>new t(e,"#cards__list-item",h).getView();function h(t,e){x.open(t,e)}const m=new class{constructor(t,e,s){let{data:i,renderer:r}=t;this._items=i,this._renderer=r,this._container=document.querySelector(e)}addItem(t){this._container.prepend(t)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._items.forEach(this._renderer)}}({data:[{name:"Disney World",link:"https://images.unsplash.com/photo-1597466599360-3b9775841aec?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=764&q=80"},{name:"Gooseberry Falls",link:"https://images.unsplash.com/photo-1618502105634-ddb28c748ddb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"Willis Tower",link:"https://images.unsplash.com/photo-1556472908-0f77e815d81b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=764&q=80"},{name:"Gateway Arch",link:"https://images.unsplash.com/photo-1593569248805-182542f82c14?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=715&q=80"},{name:"Estes Park",link:"https://images.unsplash.com/photo-1520050735087-1ed65d9b0273?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80"},{name:"Glacier National Park",link:"https://images.unsplash.com/photo-1471893370050-2c1a36cf555c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1178&q=80"}],renderer:function(t){const e=_(t);m.addItem(e)}},".cards__list",h);m.renderItems();const p=new i(r,n),f=new i(r,a);f.enableValidation(),p.enableValidation();const b=new class{constructor(t){let{userName:e,userJob:s}=t;this._userName=document.querySelector(e),this._userJob=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,job:this._userJob.textContent}}setUserInfo(t){this._userName.textContent=t.title,this._userJob.textContent=t.description}}({userName:".profile__title",userJob:".profile__description"}),E=new s("#profile-edit-modal",(function(t){b.setUserInfo(t),E.close()}));E.setEventListeners();const v=new s("#profile-add-modal",(function(t){const{title:e,image:s}=t,i=_({name:e,link:s});m.addItem(i)}));v.setEventListeners();const x=new class extends e{constructor(t){super({popupSelector:t}),this._cardImage=document.querySelector(".modal__image"),this._cardTitle=document.querySelector(".modal__title")}open(t){this._cardImage.src=t.url,this._cardTitle.textContent=t.title,this._cardImage.alt=t.title,super.open()}}("#card-modal");x.setEventListeners(),l.addEventListener("click",(()=>{E.open();const t=b.getUserInfo();c.value=t.name,d.value=t.job})),u.addEventListener("click",(()=>{f.disableButton(),v.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnhDLGdCQUNqQm1ELEVBQWFoRyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldENhcmRFbGVtZW50KCkge1xuICAgIHJldHVybiAodGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdC1pdGVtXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuICBfc2V0RXZlbnRzTGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IHRpdGxlOiB0aGlzLl9uYW1lLCB1cmw6IHRoaXMuX2xpbmsgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlSWNvbik7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9O1xuXG4gIF9oYW5kbGVMaWtlSWNvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fZmF2b3JpdGVfYWN0aXZlXCIpO1xuICB9O1xuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRDYXJkRWxlbWVudCgpO1xuXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fdGl0bGVcIik7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWFnZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZmF2b3JpdGVcIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRzX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50c0xpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBkYXRhID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBkYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICk7XG4gIH1cblxuICBfY2hlY2tWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkRpc25leSBXb3JsZFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTc0NjY1OTkzNjAtM2I5Nzc1ODQxYWVjP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc2NCZxPTgwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdvb3NlYmVycnkgRmFsbHNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE4NTAyMTA1NjM0LWRkYjI4Yzc0OGRkYj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJXaWxsaXMgVG93ZXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTU2NDcyOTA4LTBmNzdlODE1ZDgxYj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NjQmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJHYXRld2F5IEFyY2hcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTkzNTY5MjQ4ODA1LTE4MjU0MmY4MmMxND9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MTUmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJFc3RlcyBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyMDA1MDczNTA4Ny0xZWQ2NWQ5YjAyNzM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzM1JnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR2xhY2llciBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ3MTg5MzM3MDA1MC0yYzFhMzZjZjU1NWM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE3OCZxPTgwXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIFdyYXBwZXJzXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuXG4vLyBGb3Jtc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1mb3JtXCJdO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtZm9ybVwiXTtcblxuLy8gRmluZCBvcGVuIGFuZCBjbG9zZSBidXR0b25zIGZvciBlZGl0IHByb2ZpbGUgYnV0dG9uXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF9uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmZvcm1fX2lucHV0X2Rlc2NyaXB0aW9uXCJcbik7XG5cbi8vIEZpbmQgb3Blbi9jbG9zZS9mb3JtIGZpZWxkcyBmb3IgYWRkIHByb2ZpbGUgYnV0dG9uXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIGNvbmZpZyxcbiAgcHJvZmlsZUVkaXRGb3JtLFxuICBhZGRDYXJkRm9ybSxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGlucHV0TmFtZSxcbiAgaW5wdXREZXNjcmlwdGlvbixcbiAgcHJvZmlsZUFkZEJ1dHRvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuLy8gRnVuY3Rpb25zXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTdWJtaXQoZGF0YSkge1xuICBjb25zdCB7IHRpdGxlLCBpbWFnZSB9ID0gZGF0YTtcbiAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoeyBuYW1lOiB0aXRsZSwgbGluazogaW1hZ2UgfSk7XG4gIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XG59XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZE9iamVjdCkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZE9iamVjdCwgXCIjY2FyZHNfX2xpc3QtaXRlbVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufTtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTtcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgY2FyZFBvcHVwLm9wZW4obmFtZSwgbGluayk7XG59XG5cbi8vIFJlbmRlciBTZWN0aW9uIG9uIHBhZ2UgbG9hZFxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgeyBkYXRhOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG4gIFwiLmNhcmRzX19saXN0XCIsXG4gIGhhbmRsZUltYWdlQ2xpY2tcbik7XG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xuXG4vLyBlbmFibGluZyB2YWxpZGF0aW9uIGJ5IGNhbGxpbmcgZW5hYmxlVmFsaWRhdGlvbigpXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBlbmFibGUgdXNlckluZm9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIHVzZXJKb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuLy8gZW5hYmxlUG9wdXBXaXRoRm9ybSBvbiBlZGl0UHJvZmlsZVxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXRcbik7XG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIGVuYWJsZVBvcHVwV2l0aEZvcm0gb24gbmV3Q2FyZFxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXG4gIGhhbmRsZU5ld0NhcmRTdWJtaXRcbik7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gZW5hYmxlIFBvcHVwV2l0aEltYWdlIG9uIGNhcmRzXG5jb25zdCBjYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZC1tb2RhbFwiKTtcbmNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBPbiBjbGljayBldmVudCBmb3IgZWRpdFByb2ZpbGUgYnV0dG9uXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBpbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gdXNlckRhdGEuam9iO1xufSk7XG5cbi8vIE9uIGNsaWNrIGV2ZW50IGZvciBhZGRDYXJkIGJ1dHRvblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgc2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9pdGVtcyA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LCBqb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGRhdGEudGl0bGU7XG4gICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSBkYXRhLnVybDtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBkYXRhLnRpdGxlO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9nZXRDYXJkRWxlbWVudCIsIl9jYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRzTGlzdGVuZXJzIiwiX2NhcmRJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aXRsZSIsInVybCIsIl9saWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsIl9jYXJkVGl0bGUiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiYWRkIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrVmFsaWRpdHkiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlRWRpdEZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtIiwicHJvZmlsZUVkaXRCdXR0b24iLCJpbnB1dE5hbWUiLCJpbnB1dERlc2NyaXB0aW9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsImNyZWF0ZUNhcmQiLCJjYXJkT2JqZWN0IiwiY2FyZFBvcHVwIiwiY2FyZExpc3QiLCJzZWxlY3RvciIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNsZWFyIiwiaW5uZXJIVE1MIiwicmVuZGVySXRlbXMiLCJjYXJkRWxlbWVudCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwibmV3Q2FyZFBvcHVwIiwiaW1hZ2UiLCJuZXdDYXJkIiwidXNlckRhdGEiXSwic291cmNlUm9vdCI6IiJ9